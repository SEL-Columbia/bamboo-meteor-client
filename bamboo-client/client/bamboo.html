<head>
	<meta charset="UTF-8">
    <title>bamboo meteor client the awesomest of all</title>
</head>

<body>
    <div class="container-fluid">
        {{> url_entry}}
    </div>
    <div class="mainbody">
        {{> processing}}
        {{> body_render}}
        {{> powered-by}}
    </div>
</body>

<template name="error_message">
{{message}}
</template>
            
<template name="body_render">
{{#if show}}
    {{> introduction}}
    <div class="graph_panel">
    </div>
    {{> add_button}}
{{/if}}
</template>

<template name="add_button">
<div class="row">
<div class="btn btn-large offset7 span2" id="addNewGraphBtn">
    <h3>Add a New Chart</h3>
</div>
</div>
</template>
            
<template name="graphing_block">
    <div class="well span8 offset1">
        Graphs:
    </div>
</template>

<template name="url_entry">
    {{#if current_dataset_url}}
    {{else}} 

    <div class = 'logo_bamboo'>
    </div>   

    <div class ='url_init span6 offset3'>
        <input id="dataSourceURL" type="text" value="{{constants.defaultURL}}"></input>
        <div class="btn" id="submitURL">
            Submit        
        </div>
    </div>
    {{/if}}    
</template>

<template name="processing">
{{#if ready}}
    <div class="well span8 offset1">
        <h1>Preparing your dataset, just a split second..</h1>
    <img src="drop.gif">
    </div>
{{/if}}
</template>

<template name="introduction">
<div class="row">
<div class="well span8 offset1">
    <div class="row">
        <div class="span6">
        dataset: <a href="{{url}}"> {{url}}</a>
        </div>
        {{#if show_field}}
            <div class="btn pull-right" id="hideBtn">
                Hide view fields
            </div>
        {{else}}
            <div class="btn pull-right" id="moreBtn">
            Show view fields      
            </div>
        {{/if}}
    </div>

    {{#if show_field}}
    <p><b>{{num_cols}} view fields</b></p>
        <p>
        {{#each schema}}
        {{label}}
        ,&nbsp&nbsp&nbsp&nbsp
        {{/each}}
        </p>
        <p> * denotes groupable field.</p>
    {{/if}}
    </p>
</div>
</div>
</template>

<template name="control_panel">
<div class="row">
    <div class="well span8 offset1" id="control_panel_{{number}}">
        <div class="controls">
            <div id="control_logic_{{number}}">
                {{toggle}toggle
                <div id="chart_control_{{number}}">
                    <div class="page-header">
                        <h3>Create a New Chart</h3>
                    </div>
                    <div class="row offset1">
                        <p>
                            <b>View</b>
                            {{chosen}}
                            <select class="chosen" id="view_{{number}}" >
                                {{#each fields}}
                                    <option>{{this}}</option>
                                {{/each}}
                            </select>
                            <b>Group by</b>
                            <select data-placeholder="choose a group" class="chosen" id="group-by_{{number}}">
                                <option></option>
                                {{#each groups}}
                                    <option>{{this}}</option>
                                {{/each}}
                            </select>
                        </p>
                        <div class="btn pull-right chartBtn" id="{{number}}">
                            Chart
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="graph_area" style="display: none">
            {{> waiting_graph}}
        </div>
    </div>
</div>
</template>

<template name="waiting_graph">
<div class="waiting_graph">
    Proccessing the graphs, waiting a split second...
    <img src="drop.gif">
</div>
</template>
 
<template name="graph">
<div id="{{field}}_{{group}}_block">
    <div class="page-header"> 
        <div class="pull-right" id="{{field}}_{{group}}_btn">
            <div class="btn pointer downloadBtn"><img src="download-icon.svg" id="download_btn_img"></img>Download Chart</div>
            &nbsp
            <div class="btn pointer deletionBtn" src="deletion.svg">Close</div>
        </div>
        <h3 id="graph_title">{{title}}<b>{{field}}</b>{{#if group}} grouped by <b>{{group}}</b>{{/if}}</h3>
    </div>
    <div class="d3_graph" id="{{field}}_{{group}}_graph"></div>
</div>
</template>


<template name="powered-by">
<div class="powered-by">
    <div class="powered-text">
        Powered by <a href="http://bamboo.io">bamboo.io</a>
    </div>
</div>

</template>
